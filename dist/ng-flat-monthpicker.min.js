!function(){"use strict";function e(e,n,t,r){return{restrict:"A",require:"ngModel",scope:{pickerConfig:"=?pickerConfig",pickerId:"=?pickerId"},link:function(i,o,a,c){function l(e){var n=S.indexOf(e);return n>=0}function s(e){var n=x-I,t=x-e;if(n>=0){if(t>0&&t<n)return!0}else if(t<0&&t>n)return!0;return!1}function p(e){if(null==x)x=e;else{M=e;var n,t;x<=M?(n=parseInt(x),t=parseInt(M)):(n=parseInt(M),t=parseInt(x));for(var r=n;r<=t;)S.push(String(r)),r+=1,r%100==13&&(r+=88);x=M=null}}function u(e){g===e.target||g[0].contains(e.target)||e.target===o[0]||(t.off("click",u),i.$apply(function(){i.pickerDisplayed=!1}))}function d(){t.off("click",u),i.pickerDisplayed=!1,S.sort();for(var e=[],n="",r=0;r<S.length;r++){var o=S[r];if(n!=o){n=o;var a=moment(o,"YYYYMM").format(i.pickerConfig.monthFormat);e.push(a)}}c.$setViewValue(e),c.$render()}function f(){o.wrap('<div class="ng-flat-monthpicker-wrapper"></div>'),n(g)(i),o.after(g)}var g=angular.element(e.get("monthpicker.html")),m={monthFormat:"MMM YYYY",isRanged:!0,startYear:2e3,futureYear:0};i.pickerConfig=angular.extend(m,i.pickerConfig),angular.isUndefined(i.pickerId)&&(i.pickerId="");var h=moment().year()+i.pickerConfig.futureYear;i.yearsList=[];for(var k=i.pickerConfig.startYear;k<=h;k++)i.yearsList.push(k);for(var y=moment.monthsShort(),b=[],v=0;v<y.length;v++)b.push({name:y[v],"short":v<9?"0"+String(v+1):String(v+1)});i.monthSlice1=b.slice(0,6),i.monthSlice2=b.slice(6,12);var S=[];i.isRanged=i.pickerConfig.isRanged;var x=null,M=null,I=null,Y=!0;i.isSelectionEmpty=!0,i.selectMonth=function(e,n){if(i.isSelectionEmpty=!1,i.isRanged)return void p(e);var t=S.indexOf(e);t>=0?S.splice(t,1):S.push(e),n.stopPropagation()},i.getStyle=function(e){if(i.isRanged&&null!=x){if(s(e))return{"background-color":"#e6e6e6",color:"#393939","border-radius":"0px"};var n={"background-color":"#569ff7",color:"#fff","border-top-left-radius":"0px","border-bottom-left-radius":"0px"},t={"background-color":"#569ff7",color:"#fff","border-top-right-radius":"0px","border-bottom-right-radius":"0px"};if(e==x)return x-I>0?n:t;if(e==I)return x-I>0?t:n}if(l(e)){var r={"background-color":"#b3f1a8",color:"black"},o=+e+1;o%100==13&&(o+=88);var a=+e-1;return a%100==0&&(a-=88),l(String(a))&&(r=angular.extend(r,{"border-top-left-radius":"0px","border-bottom-left-radius":"0px"})),l(String(o))&&(r=angular.extend(r,{"border-top-right-radius":"0px","border-bottom-right-radius":"0px"})),r}return{}},i.close_picker=function(){d()},i.clear_picker=function(){S.length=0,i.isSelectionEmpty=!0},i.onMouseEnter=function(e){I=e},i.pickerDisplayed=!1,o.bind("click",function(){i.$apply(function(){i.pickerDisplayed=!0,t.on("click",u)}),Y&&(r(function(){var e=i.pickerId+"_tbl_"+moment().year();t[0].getElementById(e).scrollIntoView()},0),Y=!1)}),f()}}}e.$inject=["$templateCache","$compile","$document","$timeout"],angular.module("ngFlatMonthpicker",[]).directive("ngFlatMonthpicker",e)}(),angular.module("ngFlatMonthpicker").run(["$templateCache",function(e){e.put("monthpicker.html",'<div class="ng-flat-monthpicker" ng-show="pickerDisplayed">\n    <div class="picker-input-bar">\n        <button ng-class="[\'clear\', {\'opaque\' : isSelectionEmpty}]" ng-click="clear_picker()">Clear</button>\n        <button class="close-picker" ng-click="close_picker()">Done</button>\n        <label>\n            <input type="checkbox" ng-model="isRanged" ng-checked="isRanged"/>\n            Range Selection\n        </label>\n    </div>\n    <div class="picker-box">\n        <table ng-repeat="year in yearsList" id=\'{{pickerId}}_tbl_{{year}}\'>\n            <tbody>\n                <tr class="months">\n                    <td class="year-item" rowspan="2"> {{year}} </td>\n                    <td class="month-item" ng-style="getStyle(year+month.short)" ng-click="selectMonth(year+month.short, $event)" ng-mouseenter="onMouseEnter(year+month.short)" ng-repeat="month in monthSlice1">{{month.name}}</td>\n                </tr>\n                <tr class="months">\n                    <td class="year-item"></td>\n                    <td class="month-item" ng-style="getStyle(year+month.short)" ng-click="selectMonth(year+month.short, $event)" ng-mouseenter="onMouseEnter(year+month.short)" ng-repeat="month in monthSlice2">{{month.name}}</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>')}]);