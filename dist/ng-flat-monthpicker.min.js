!function(){"use strict";function e(e,n,t,r){return{restrict:"A",require:"ngModel",scope:{pickerConfig:"=?pickerConfig",pickerId:"=?pickerId"},link:function(o,i,a,c){function l(e){var n=v.indexOf(e);return n>=0}function s(e){var n=S-M,t=S-e;if(n>=0){if(t>0&&t<n)return!0}else if(t<0&&t>n)return!0;return!1}function p(e){if(null==S)S=e;else{x=e;var n,t;S<=x?(n=parseInt(S),t=parseInt(x)):(n=parseInt(x),t=parseInt(S));for(var r=n;r<=t;)v.push(String(r)),r+=1,r%100==13&&(r+=88);S=x=null}}function u(e){g===e.target||g[0].contains(e.target)||e.target===i[0]||(t.off("click",u),o.$apply(function(){o.pickerDisplayed=o.showMonthsList=o.showYearsList=!1}))}function d(){t.off("click",u),o.pickerDisplayed=!1,v.sort();for(var e=[],n="",r=0;r<v.length;r++){var i=v[r];if(n!=i){n=i;var a=moment(i,"YYYYMM").format(o.pickerConfig.monthFormat);e.push(a)}}c.$setViewValue(e),c.$render()}function f(){i.wrap('<div class="ng-flat-monthpicker-wrapper"></div>'),n(g)(o),i.after(g)}var g=angular.element(e.get("monthpicker.html")),m={monthFormat:"MMM YYYY",isRanged:!0,startYear:2e3,futureYear:0};o.pickerConfig=angular.extend(m,o.pickerConfig),angular.isUndefined(o.pickerId)&&(o.pickerId="");var h=moment().year()+o.pickerConfig.futureYear;o.yearsList=[];for(var k=o.pickerConfig.startYear;k<=h;k++)o.yearsList.push(k);for(var y=moment.monthsShort(),b=[],k=0;k<y.length;k++)b.push({name:y[k],"short":k<9?"0"+String(k+1):String(k+1)});o.monthSlice1=b.slice(0,6),o.monthSlice2=b.slice(6,12);var v=[];o.isRanged=o.pickerConfig.isRanged;var S=null,x=null,M=null;o.isSelectionEmpty=!0,o.selectMonth=function(e,n){if(o.isSelectionEmpty=!1,o.isRanged)return void p(e);var t=v.indexOf(e);t>=0?v.splice(t,1):v.push(e),n.stopPropagation()},o.getStyle=function(e){if(o.isRanged&&null!=S){if(s(e))return{"background-color":"#e6e6e6",color:"#393939","border-radius":"0px"};var n={"background-color":"#569ff7",color:"#fff","border-top-left-radius":"0px","border-bottom-left-radius":"0px"},t={"background-color":"#569ff7",color:"#fff","border-top-right-radius":"0px","border-bottom-right-radius":"0px"};if(e==S)return S-M>0?n:t;if(e==M)return S-M>0?t:n}if(l(e)){var r={"background-color":"#b3f1a8",color:"black"},i=+e+1;i%100==13&&(i+=88);var a=+e-1;return a%100==0&&(a-=88),l(String(a))&&(r=angular.extend(r,{"border-top-left-radius":"0px","border-bottom-left-radius":"0px"})),l(String(i))&&(r=angular.extend(r,{"border-top-right-radius":"0px","border-bottom-right-radius":"0px"})),r}return{}},o.close_picker=function(){d()},o.clear_picker=function(){v.length=0,o.isSelectionEmpty=!0},o.onMouseEnter=function(e){M=e},o.pickerDisplayed=!1,i.bind("click",function(e){o.$apply(function(){o.pickerDisplayed=!0,t.on("click",u)});var n=o.pickerId+"_tbl_"+moment().year();r(n)}),f()}}}e.$inject=["$templateCache","$compile","$document","$anchorScroll"],angular.module("ngFlatMonthpicker",[]).directive("ngFlatMonthpicker",e)}(),angular.module("ngFlatMonthpicker").run(["$templateCache",function(e){e.put("monthpicker.html",'<div class="ng-flat-monthpicker" ng-show="pickerDisplayed">\n    <div class="picker-input-bar">\n        <button ng-class="[\'clear\', {\'opaque\' : isSelectionEmpty}]" ng-click="clear_picker()">Clear</button>\n        <button ng-class="[\'close-picker\', {\'opaque\' : isSelectionEmpty}]" ng-click="close_picker()">Done</button>\n        <label>\n            <input type="checkbox" ng-model="isRanged" ng-checked="isRanged"/>\n            Range Selection\n        </label>\n    </div>\n    <div class="picker-box">\n        <table ng-repeat="year in yearsList" id=\'{{pickerId}}_tbl_{{year}}\'>\n            <tbody>\n                <tr class="months">\n                    <td class="year-item" rowspan="2"> {{year}} </td>\n                    <td class="month-item" ng-style="getStyle(year+month.short)" ng-click="selectMonth(year+month.short, $event)" ng-mouseenter="onMouseEnter(year+month.short)" ng-repeat="month in monthSlice1">{{month.name}}</td>\n                </tr>\n                <tr class="months">\n                    <td class="year-item"></td>\n                    <td class="month-item" ng-style="getStyle(year+month.short)" ng-click="selectMonth(year+month.short, $event)" ng-mouseenter="onMouseEnter(year+month.short)" ng-repeat="month in monthSlice2">{{month.name}}</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>')}]);