!function(){"use strict";function n(n,t,r,o){return{restrict:"A",require:"ngModel",scope:{pickerConfig:"=?pickerConfig",pickerId:"=?pickerId"},link:function(i,a,c,l){function s(e){var n=x.indexOf(e);return n>=0}function p(e){var n=M-$,t=M-e;if(n>=0){if(t>0&&t<n)return!0}else if(t<0&&t>n)return!0;return!1}function u(e){if(null==M)M=e;else{Y=e;var n,t;M<=Y?(n=parseInt(M),t=parseInt(Y)):(n=parseInt(Y),t=parseInt(M));for(var r=n;r<=t;)x.push(String(r)),r+=1,r%100==13&&(r+=88);M=Y=null}}function d(){m===e.target||m[0].contains(e.target)||e.target===a[0]||(r.off("click",d),i.$apply(function(){i.pickerDisplayed=!1}))}function f(){r.off("click",d),i.pickerDisplayed=!1,x.sort();for(var e=[],n="",t=0;t<x.length;t++){var o=x[t];if(n!=o){n=o;var a=moment(o,"YYYYMM").format(i.pickerConfig.monthFormat);e.push(a)}}l.$setViewValue(e),l.$render()}function g(){a.wrap('<div class="ng-flat-monthpicker-wrapper"></div>'),t(m)(i),a.after(m)}var m=angular.element(n.get("monthpicker.html")),h={monthFormat:"MMM YYYY",isRanged:!0,startYear:2e3,futureYear:0};i.pickerConfig=angular.extend(h,i.pickerConfig),angular.isUndefined(i.pickerId)&&(i.pickerId="");var k=moment().year()+i.pickerConfig.futureYear;i.yearsList=[];for(var b=i.pickerConfig.startYear;b<=k;b++)i.yearsList.push(b);for(var y=moment.monthsShort(),v=[],S=0;S<y.length;S++)v.push({name:y[S],"short":S<9?"0"+String(S+1):String(S+1)});i.monthSlice1=v.slice(0,6),i.monthSlice2=v.slice(6,12);var x=[];i.isRanged=i.pickerConfig.isRanged;var M=null,Y=null,$=null;i.isSelectionEmpty=!0,i.selectMonth=function(e,n){if(i.isSelectionEmpty=!1,i.isRanged)return void u(e);var t=x.indexOf(e);t>=0?x.splice(t,1):x.push(e),n.stopPropagation()},i.getStyle=function(e){if(i.isRanged&&null!=M){if(p(e))return{"background-color":"#e6e6e6",color:"#393939","border-radius":"0px"};var n={"background-color":"#569ff7",color:"#fff","border-top-left-radius":"0px","border-bottom-left-radius":"0px"},t={"background-color":"#569ff7",color:"#fff","border-top-right-radius":"0px","border-bottom-right-radius":"0px"};if(e==M)return M-$>0?n:t;if(e==$)return M-$>0?t:n}if(s(e)){var r={"background-color":"#b3f1a8",color:"black"},o=+e+1;o%100==13&&(o+=88);var a=+e-1;return a%100==0&&(a-=88),s(String(a))&&(r=angular.extend(r,{"border-top-left-radius":"0px","border-bottom-left-radius":"0px"})),s(String(o))&&(r=angular.extend(r,{"border-top-right-radius":"0px","border-bottom-right-radius":"0px"})),r}return{}},i.close_picker=function(){f()},i.clear_picker=function(){x.length=0,i.isSelectionEmpty=!0},i.onMouseEnter=function(e){$=e},i.pickerDisplayed=!1,a.bind("click",function(e){i.$apply(function(){i.pickerDisplayed=!0,r.on("click",d)});var n=i.pickerId+"_tbl_"+moment().year();o(n)}),g()}}}n.$inject=["$templateCache","$compile","$document","$anchorScroll"],angular.module("ngFlatMonthpicker",[]).directive("ngFlatMonthpicker",n)}(),angular.module("ngFlatMonthpicker").run(["$templateCache",function(e){e.put("monthpicker.html",'<div class="ng-flat-monthpicker" ng-show="pickerDisplayed">\n    <div class="picker-input-bar">\n        <button ng-class="[\'clear\', {\'opaque\' : isSelectionEmpty}]" ng-click="clear_picker()">Clear</button>\n        <button class="close-picker" ng-click="close_picker()">Done</button>\n        <label>\n            <input type="checkbox" ng-model="isRanged" ng-checked="isRanged"/>\n            Range Selection\n        </label>\n    </div>\n    <div class="picker-box">\n        <table ng-repeat="year in yearsList" id=\'{{pickerId}}_tbl_{{year}}\'>\n            <tbody>\n                <tr class="months">\n                    <td class="year-item" rowspan="2"> {{year}} </td>\n                    <td class="month-item" ng-style="getStyle(year+month.short)" ng-click="selectMonth(year+month.short, $event)" ng-mouseenter="onMouseEnter(year+month.short)" ng-repeat="month in monthSlice1">{{month.name}}</td>\n                </tr>\n                <tr class="months">\n                    <td class="year-item"></td>\n                    <td class="month-item" ng-style="getStyle(year+month.short)" ng-click="selectMonth(year+month.short, $event)" ng-mouseenter="onMouseEnter(year+month.short)" ng-repeat="month in monthSlice2">{{month.name}}</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>')}]);